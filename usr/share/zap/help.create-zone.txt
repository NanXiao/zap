ZAP and zone creation
=====================

The zap utility allows you to create zones with a given specification
and control the software installed in the zone.

The syntax of the subcommand is:

create-zone -z zone_name [-t whole|sparse|alien]
    [-T template] [-I iso_image] [-i ip_address]
    [-d extra_dir] [-o overlay] [-O overlay] [-U user]

Supplying the zone_name is mandatory; all other arguments are optional.

The -t flag specifies the zone type, which may be whole, sparse, or
alien. For a whole-root zone, the zone has its own copy of all
required file systems. In a sparse-root zone the file systems
containing the operating system - /lib, /platform, /usr, and /sbin -
are inherited read-only from the global zone (or an alternate source -
see the -T flag). An alien-root zone contains file systems derived
from an ISO image of an alternative illumos distribution. The default
is to create a sparse-root zone.

The -i flag specifies an IP address. If supplied, the zone will be
given this IP address. This flag can be used multiple times to assign
multiple IP addresses.

The -d flag specifies a directory to be created and mounted inside the
zone. This flag can be used multiple times to create multiple
directories in the zone.

The -o flag specifies an overlay to be installed in the zone. This flag
can be used multiple times to require multiple overlays. The use of
this flag requires that the zone type be specified as whole. The
effect of listing overlays here is that the zone is created from the
global zone and only contains the subset of the packages that are
contained in the given overlays; if you specify an overlay that is not
present in the global zone then it will not be present in the new
zone either.

The -O flag specifies an overlay to be added to the zone. This flag can
be used multiple times to add multiple overlays. The use of this flag
requires that the zone type be specified as whole. Unlike the -o flag
which specifies that the zone contains a subset of the packages in the
global zone, the -O flag adds extra packages, and does not require the
overlays or packages to be present in the global zone.

The -U flag specifies a user account to be shared with the zone. The
account will be created in the zone with the same details as in the
global zone, and the home directory will be shared. In addition, that
user is delegated management of the zone, including the ability to use
zlogin to connect to the zone. Note that this mechanism gives the
delegated user full root access to the zone, and potentially full root
access to the global zone via shared file systems.

The -T flag allows you to use a template to provide the file systems to
a sparse-root zone instead of the default inheritance from the global
zone. Use the zap create-zone-template subcommand to construct such a
template.

The -I flag is required for an alien zone, and specifies the iso image
that will be used to install the zone.
